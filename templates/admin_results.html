{% extends "base.html" %}
{% block title %}User Results{% endblock %}
{% block content %}
<div class="card">
  <h2>User Attempts</h2>
  <div class="table-wrap">
    <table class="table">
      <thead>
        <tr>
          <th>Attempt ID</th><th>Name</th><th>Started (UTC)</th><th>Score</th><th>Qns</th><th>Details</th>
        </tr>
      </thead>
      <tbody>
      {% for r in results %}
        <tr>
          <td>{{ r.id }}</td>
          <td>{{ r.name }}</td>
          <td>{{ r.started_at.split('T')[0] if r.started_at is defined else "N/A" }}</td>

          <td>{{ '%.1f'|format(r.score) }}</td>
          <td>{{ r.total_questions }}</td>
          <td><a class="btn small" href="{{ url_for('results_page', attempt_id=r.id) }}">View</a></td>
          <td>
            <form action="{{ url_for('admin_results_delete', attempt_id=r.id) }}" method="POST" style="display:inline;" onsubmit="return confirm('Are you sure you want to delete this attempt?');">
                <button type="submit" class="btn danger small">Delete</button>
            </form>
          </td>
        </tr>
      {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
